59 Интерфейс ATAPI. Дополнительные функции ATA: SMART, Security, HPA, NV Cache.

Шина UltraATA появилась в ATA/ATAPI6. Благодаря использованию стандартной 16-разрядной параллельной информационной шины и 40- контактного разъёма, пропускающего 16 командных сигналов. За одну транзакцию 2 байта данных. При DMA используется двусторонний механизм подачи импульсов (данные регистрируются как на переднем, так и на заднем фронте строба данных). Пропускная способность: 100 МБ/с. Частота синхронизации 50 МГц или 20 нс.

ATAPI – расширение интерфейса ATA, фактически это метод передачи команд SCSI по интерфейсу ATA. Реализуется посредством команд чтения/записи пакетов данных, сформированных в соответствие с форматом SCSI. ATAPI – расширение универсальное, но в основном ис­пользуется для оптических накопителей.

SMART – Self Monitoring, Analysis & Reporting Technology, система мониторинга состояния винчестера. Специальные алгоритмы отслежи­вают состояние различных подсистем жесткого диска и предлагают прогноз его работоспособности. Цель SMART – заблаговременно преду­предить пользователя о возможном выходе из строя. SMART выполняет самотестирование, отслеживает определенные события (ошибки сек­торов и интерфейса, переименование секторов, сбои запуска двигателя и т.д.), подсчитывает параметры работы (скорость запуска двигателя, температура и т.д.). Результаты работы SMART представлены в виде значений атрибутов – критичных для надежности параметров. C помо­щью значений в регистре FR можно вызвать ту или иную команду SMART (прочитать значения, пороги, журналы, обновить значения, вкл/выкл. режимы автообновления, самотестирования, поддержку SMART).

Security - режим блокировки с помощью пароля. Доступны следующие функции: Set Password – сохранение пароля (до 32 символов) и

установка режима секретности. Предусмотрены два пароля – User и Master, и два режима – High и Maximum. Disable Password – снятие бло­кировки (отмена защиты). Unlock – передача пароля на проверку, разблокировка. Erase Unit – стереть всю информацию, аналогично форма­тированию.

Host Protected Area (HPA) – специальная зона в конце диска, недоступная обычными операциями чтения. ПО может устанавливать максимальное количество доступных секторов, которое сохраняется между перезагрузками. Если установить доступное количество секторов менее суще­ ствующих, то часть диска будет недоступна, сформируется защищенная зона – HPA. В HPA можно сохранять различную информацию, напр., образ системного диска, дамп памяти, копию BIOS и т.п. Чтобы прочитать HPA, требуется установить изначальное число секторов на диске той же командой.

NV Cache - Специально для поддержки гибридных винчестеров в архитектурную модель ATA были добавлены команды управления энер­гонезависимым кэшем (Non-volatile cache). Гибридный диск представляет собой классический винчестер с дополнительным буфером flash- памяти. Основное назначение flash-памяти:

• Хранение часто используемых файлов операционной системы.

• Хранение файлов, используемых при загрузке операционной системы.

• Хранение hibernate pool – файла содержимого памяти и др. ресурсов операционной системы.
