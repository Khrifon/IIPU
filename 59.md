59. Интерфейс ATAPI. Дополнительные функции ATA: SMART, Security, HPA, NV Cache.

Шина UltraATA появилась в ATA/ATAPI6. Благодаря использованию стандартной 16разрядной парал-лельной информационной шины и 40контактного разъёма, пропускающего 16 командных сигналов. За од-ну транзакцию 2 байта данных. При DMA используется двусторонний механизм подачи импульсов (дан-ные регистрируются как на переднем, так и на заднем фронте строба данных). Пропускная способность: 100 МБ/с. Частота синхронизации 50 МГц или 20 нс.

ATAPI – расширение интерфейса ATA, фактически это метод передачи команд SCSI по интерфейсу ATA. Реализуется посредством команд чтения/записи пакетов данных, сформированных в соответствие с форма-том SCSI. ATAPI – расширение универсальное, но в основном используется для оптических накопителей.

SMART – Self Monitoring, Analysis & Reporting Technology, система мониторинга состояния винчестера. Специальные алгоритмы отслеживают состояние различных подсистем жесткого диска и предлагают про-гноз его работоспособности. Цель SMART – заблаговременно предупредить пользователя о возможном выходе из строя. SMART выполняет самотестирование, отслеживает определенные события (ошибки сек-торов и интерфейса, переименование секторов, сбои запуска двигателя и т.д.), подсчитывает параметры работы (скорость запуска двигателя, температура и т.д.). Результаты работы SMART представлены в виде значений атрибутов – критичных для надежности параметров. C помощью значений в регистре FR можно вызвать ту или иную команду SMART (прочитать значения, пороги, журналы, обновить значения, вкл/выкл. режимы автообновления, самотестирования, поддержку SMART).

SECURITY - режим блокировки с помощью пароля. Доступны следующие функции: Set Password – со-хранение пароля (до 32 символов) и установка режима секретности. Предусмотрены два пароля – User и Master, и два режима – High и Maximum. Disable Password – снятие блокировки (отмена защиты). Unlock – передача пароля на проверку, разблокировка. Erase Unit – стереть всю информацию, аналогично формати-рованию.

Host Protected Area – специальная зона в конце диска, не доступная обычными операциями чтения. ПО может устанавливать максимальное количество доступных секторов, которое сохраняется между переза-грузками. Если установить доступное количество секторов менее существующих, то часть диска будет не-доступна, сформируется защищенная зона – HPA. В HPA можно сохранять различную информацию, напр., образ системного диска, дамп памяти, копию BIOS и т.п. Чтобы прочитать HPA, требуется установить из-начальное число секторов на диске той же командой.

NV CACHE - Специально для поддержки гибридных винчестеров в архитектурную модель ATA были до-бавлены команды управления энергонезависимым кэшем (Non-volatile cache). Гибридный диск представля-ет собой классический винчестер с дополнительным буфером flash-памяти.
